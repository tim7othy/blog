!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=60)}([function(t,e,n){var r=n(10)("wks"),i=n(12),o=n(1).Symbol,s="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=r},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(13),i=n(24);t.exports=n(5)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(8);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){t.exports=!n(14)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(1),i=n(2),o=n(7),s=n(12)("src"),a=n(38),u=(""+a).split("toString");n(11).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(c&&(o(n,s)||i(n,s,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:a?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(11),i=n(1),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(20)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(3),i=n(36),o=n(37),s=Object.defineProperty;e.f=n(5)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports={}},function(t,e,n){var r=n(45),i=n(4);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(10)("keys"),i=n(12);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(9),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=!1},function(t,e,n){"use strict";var r,i,o=n(35),s=RegExp.prototype.exec,a=String.prototype.replace,u=s,c=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(c||l)&&(u=function(t){var e,n,r,i,u=this;return l&&(n=new RegExp("^"+u.source+"$(?!\\s)",o.call(u))),c&&(e=u.lastIndex),r=s.call(u,t),c&&r&&(u.lastIndex=u.global?r.index+r[0].length:e),l&&r&&r.length>1&&a.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r}),t.exports=u},function(t,e,n){var r=n(1),i=n(11),o=n(2),s=n(6),a=n(39),u=function(t,e,n){var c,l,p,f,h=t&u.F,d=t&u.G,v=t&u.S,g=t&u.P,x=t&u.B,y=d?r:v?r[e]||(r[e]={}):(r[e]||{}).prototype,b=d?i:i[e]||(i[e]={}),_=b.prototype||(b.prototype={});for(c in d&&(n=e),n)p=((l=!h&&y&&void 0!==y[c])?y:n)[c],f=x&&l?a(p,r):g&&"function"==typeof p?a(Function.call,p):p,y&&s(y,c,p,t&u.U),b[c]!=p&&o(b,c,f),g&&_[c]!=p&&(_[c]=p)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(8),i=n(1).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(50),i=n(26);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(13).f,i=n(7),o=n(0)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){"use strict";var r=n(3),i=n(18),o=n(29),s=n(31);n(33)("match",1,function(t,e,n,a){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var u=r(t),c=String(this);if(!u.global)return s(u,c);var l=u.unicode;u.lastIndex=0;for(var p,f=[],h=0;null!==(p=s(u,c));){var d=String(p[0]);f[h]=d,""===d&&(u.lastIndex=o(c,i(u.lastIndex),l)),h++}return 0===h?null:f}]})},function(t,e,n){"use strict";var r=n(30)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r=n(9),i=n(4);t.exports=function(t){return function(e,n){var o,s,a=String(i(e)),u=r(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(32),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,n){var r=n(19),i=n(0)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){"use strict";n(34);var r=n(6),i=n(2),o=n(14),s=n(4),a=n(0),u=n(21),c=a("species"),l=!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),p=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var f=a(t),h=!o(function(){var e={};return e[f]=function(){return 7},7!=""[t](e)}),d=h?!o(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[c]=function(){return n}),n[f](""),!e}):void 0;if(!h||!d||"replace"===t&&!l||"split"===t&&!p){var v=/./[f],g=n(s,f,""[t],function(t,e,n,r,i){return e.exec===u?h&&!i?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),x=g[0],y=g[1];r(String.prototype,t,x),i(RegExp.prototype,f,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}}},function(t,e,n){"use strict";var r=n(21);n(22)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(t,e,n){"use strict";var r=n(3);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){t.exports=!n(5)&&!n(14)(function(){return 7!=Object.defineProperty(n(23)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(8);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){t.exports=n(10)("native-function-to-string",Function.toString)},function(t,e,n){var r=n(40);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){for(var r=n(42),i=n(25),o=n(6),s=n(1),a=n(2),u=n(15),c=n(0),l=c("iterator"),p=c("toStringTag"),f=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(h),v=0;v<d.length;v++){var g,x=d[v],y=h[x],b=s[x],_=b&&b.prototype;if(_&&(_[l]||a(_,l,f),_[p]||a(_,p,x),u[x]=f,y))for(g in r)_[g]||o(_,g,r[g],!0)}},function(t,e,n){"use strict";var r=n(43),i=n(44),o=n(15),s=n(16);t.exports=n(46)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(0)("unscopables"),i=Array.prototype;null==i[r]&&n(2)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(19);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var r=n(20),i=n(22),o=n(6),s=n(2),a=n(15),u=n(47),c=n(27),l=n(54),p=n(0)("iterator"),f=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,d,v,g,x){u(n,e,d);var y,b,_,m=function(t){if(!f&&t in E)return E[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",k="values"==v,S=!1,E=t.prototype,O=E[p]||E["@@iterator"]||v&&E[v],j=O||m(v),C=v?k?m("entries"):j:void 0,T="Array"==e&&E.entries||O;if(T&&(_=l(T.call(new t)))!==Object.prototype&&_.next&&(c(_,w,!0),r||"function"==typeof _[p]||s(_,p,h)),k&&O&&"values"!==O.name&&(S=!0,j=function(){return O.call(this)}),r&&!x||!f&&!S&&E[p]||s(E,p,j),a[e]=j,a[w]=h,v)if(y={values:k?j:m("values"),keys:g?j:m("keys"),entries:C},x)for(b in y)b in E||o(E,b,y[b]);else i(i.P+i.F*(f||S),e,y);return y}},function(t,e,n){"use strict";var r=n(48),i=n(24),o=n(27),s={};n(2)(s,n(0)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(3),i=n(49),o=n(26),s=n(17)("IE_PROTO"),a=function(){},u=function(){var t,e=n(23)("iframe"),r=o.length;for(e.style.display="none",n(53).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(13),i=n(3),o=n(25);t.exports=n(5)?Object.defineProperties:function(t,e){i(t);for(var n,s=o(e),a=s.length,u=0;a>u;)r.f(t,n=s[u++],e[n]);return t}},function(t,e,n){var r=n(7),i=n(16),o=n(51)(!1),s=n(17)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(16),i=n(18),o=n(52);t.exports=function(t){return function(e,n,s){var a,u=r(e),c=i(u.length),l=o(s,c);if(t&&n!=n){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(9),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(1).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(7),i=n(55),o=n(17)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var r=n(4);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(57);"string"==typeof r&&(r=[[t.i,r,""]]);var i={insert:"head",singleton:!1};n(59)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(58)(!1)).push([t.i,"*{margin:0px;padding:0px}#root{position:relative}#ide{width:100%}#ide .ide_header{height:5vh;background:#ededed}#ide .ide_header .ide_title{display:inline-block;height:5vh;line-height:5vh;margin-left:3vw;text-align:center}#ide .ide_header .ide_button{display:inline-block;width:5vw;height:3vh;line-height:3vh;vertical-align:top;margin-left:3vw;margin-top:1vh;background:#ebf3ff;color:#000;font-size:15px;text-align:center;outline:none;border:1px solid grey;border-radius:5px;cursor:pointer}#ide .ide_header .ide_button:hover{background:#f5f9ff}#ide .ide_main{overflow:hidden;height:80vh}#ide .ide_main .ide_editor,#ide .ide_main .ide_display{box-sizing:border-box;padding:10px;float:left;width:50vw;height:100%;font-size:20px}#ide .ide_main .ide_display{font-size:0;background:#f7f7f7}#ide .ide_main .ide_display span{font-size:20px}#ide .ide_console_wrapper{height:15vh;font-size:15px;background:#ededed}#ide .ide_console_wrapper .ide_console_title{box-sizing:border-box;height:5vh;line-height:5vh;padding-left:2vw;border-bottom:1px solid grey}#ide .ide_console_wrapper .ide_console{height:10vh;padding-left:2vw;overflow:auto}#ide .popup-tip{width:200px;height:100px;position:absolute;border:1px solid black}#ide .popup-tip .popup-title{box-sizing:border-box;height:30px;padding:0 5px;background:#ebf3ff}#ide .popup-tip .popup-content{box-sizing:border-box;height:70px;padding:5px;background:#fff;overflow:auto}\n",""])},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(s=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(u," */")),o=r.sources.map(function(t){return"/*# sourceURL=".concat(r.sourceRoot).concat(t," */")});return[n].concat(o).concat([i]).join("\n")}var s,a,u;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2],"{").concat(n,"}"):n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(var s=0;s<t.length;s++){var a=t[s];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="(".concat(a[2],") and (").concat(n,")")),e.push(a))}},e}},function(t,e,n){"use strict";var r,i={},o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},s=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}();function a(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],s=e.base?o[0]+e.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function u(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=i[r.id],s=0;if(o){for(o.refs++;s<o.parts.length;s++)o.parts[s](r.parts[s]);for(;s<r.parts.length;s++)o.parts.push(v(r.parts[s],e))}else{for(var a=[];s<r.parts.length;s++)a.push(v(r.parts[s],e));i[r.id]={id:r.id,refs:1,parts:a}}}}function c(t){var e=document.createElement("style");if(void 0===t.attributes.nonce){var r=n.nc;r&&(t.attributes.nonce=r)}if(Object.keys(t.attributes).forEach(function(n){e.setAttribute(n,t.attributes[n])}),"function"==typeof t.insert)t.insert(e);else{var i=s(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var l,p=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function f(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=p(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}var h=null,d=0;function v(t,e){var n,r,i;if(e.singleton){var o=d++;n=h||(h=c(e)),r=f.bind(null,n,o,!1),i=f.bind(null,n,o,!0)}else n=c(e),r=function(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i&&t.setAttribute("media",i),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).attributes="object"==typeof e.attributes?e.attributes:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=o());var n=a(t,e);return u(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var s=n[o],c=i[s.id];c&&(c.refs--,r.push(c))}t&&u(a(t,e),e);for(var l=0;l<r.length;l++){var p=r[l];if(0===p.refs){for(var f=0;f<p.parts.length;f++)p.parts[f]();delete i[p.id]}}}}},function(t,e,n){"use strict";n.r(e);n(28),n(41);const r=t=>160===t.charCodeAt(0)||/[ \n\t]/.test(t),i=t=>/[0-9]/.test(t),o=t=>/[a-zλ_]/.test(t),s=t=>/[a-zA-Z0-9λ_]/.test(t),a=t=>"+-*/%=&|<>!".indexOf(t)>=0,u=t=>",;(){}[]".indexOf(t)>=0;class c{constructor(t,e,n){this.type=t,this.value=e,this.pos=n}}class l{constructor(t){this.input=t,this.current=null,this.observers=new Set}registerObserver(t){this.observers.has(t)||this.observers.add(t)}read_next(){if(this.read_while(r),this.input.eof())return null;const t=this.input.peek(),e=this.input.pos;return"#"===t?(this.skip_comment(),this.read_next()):'"'===t?this.read_string():i(t)?this.read_number():o(t)?this.read_identifier():a(t)?new c("op",this.read_while(a),e):u(t)?new c("punc",this.input.next(),e):void this.input.error("can't handle character "+t)}read_while(t){let e="",n=this.input;for(;!n.eof()&&t(n.peek());)e+=n.next();return e}skip_comment(){this.read_while(t=>"\n"!==t),this.input.next()}read_number(){const t=this.input.pos;let e=!1,n=this.read_while(t=>"."===t?!e&&(e=!0,!0):i(t));return new c("num",parseFloat(n),t)}read_string(){const t=this.input.pos;return new c("str",this.read_escaped(),t)}read_escaped(){let t=this.input;t.next();let e=!1,n="";for(;!t.eof();){let r=t.peek();if(e)e=!1,n+=t.next();else if("\\"===r)e=!0,n+=t.next();else{if('"'===r){t.next();break}n+=t.next()}}return n}read_identifier(){const t=this.input.pos;let e=this.read_while(s);return new c((t=>" if then else lambda λ true false ".indexOf(" "+t+" ")>=0)(e)?"kw":"var",e,t)}next(){let t=this.current;return this.current=null,null!=(t=t||this.read_next())&&this.observers.forEach(e=>{e.notify(t,t.pos,new String(t.value).length+t.pos)}),t}peek(){return null===this.current&&(this.current=this.read_next()),this.current}eof(){return null===this.peek()}error(t){this.input.error(t)}lexing(){let t=[],e=null;for(;null!==(e=this.next());)t.push(e);return t}}class p{constructor(t){this.updateCode(t)}updateCode(t){this.code=t,this.line=0,this.col=0,this.pos=0}peek(){return this.code[this.pos]}next(){let t=this.code[this.pos++];return"\n"===t?(this.line++,this.col=0):this.col++,t}eof(){let t=this.peek();return""===t||void 0===t}error(t){throw new Error("".concat(t,",line: ").concat(this.line,",col: ").concat(this.col))}}class f{constructor(t){this.lexer=t,this.PRECEDENCE={"=":1,"||":2,"&&":3,"<":7,">":7,"<=":7,">=":7,"==":7,"!=":7,"+":10,"-":10,"*":20,"/":20,"%":20}}is_tok(t,e){let n=this.lexer.peek();return n&&n.type==t&&(!e||n.value==e)}skip_tok(t,e){this.is_tok(t,e)?this.lexer.next():this.lexer.error("Expecting ".concat(t,": ").concat(e))}parse_atom(){return this.expect_call(()=>{if(this.is_tok("punc","(")){this.lexer.next();var t=this.parse_expression();return this.skip_tok("punc",")"),t}if(this.is_tok("punc","{"))return this.parse_prog();if(this.is_tok("kw","if"))return this.parse_if();if(this.is_tok("kw","true")||this.is_tok("kw","false"))return this.parse_bool();if(this.is_tok("kw","lambda")||this.is_tok("kw","λ"))return this.lexer.next(),this.parse_lambda();var e=this.lexer.next();if("var"==e.type||"num"==e.type||"str"==e.type)return e;this.unexpected()})}parse_expression(){return this.expect_call(()=>this.expect_binary(this.parse_atom(),0))}expect_call(t){return t=t(),this.is_tok("punc","(")?this.parse_call(t):t}expect_binary(t,e){if(this.is_tok("op")){const n=this.lexer.peek(),r=this.PRECEDENCE[n.value];if(r>e)return this.lexer.next(),{type:"="==n.value?"assign":"binary",operator:n.value,left:t,right:this.expect_binary(this.parse_atom(),r)}}return t}parse_prog(){var t=this.delimited("{","}",";",this.parse_expression.bind(this));return 0==t.length?{type:"bool",value:!1}:1==t.length?t[0]:{type:"prog",prog:t}}delimited(t,e,n,r){var i=[],o=!0;for(this.skip_tok("punc",t);!this.lexer.eof()&&!this.is_tok("punc",e)&&(o?o=!1:this.skip_tok("punc",n),!this.is_tok("punc",e));)i.push(r());return this.skip_tok("punc",e),i}parse_call(t){return{type:"call",func:t,args:this.delimited("(",")",",",this.parse_expression.bind(this))}}parse_varname(){var t=this.lexer.next();return"var"!=t.type&&this.lexer.error("Expecting variable name"),t.value}parse_if(){this.skip_tok("kw","if");var t=this.parse_expression();this.is_tok("punc","{")||this.skip_tok("kw","then");var e={type:"if",cond:t,then:this.parse_expression()};return this.is_tok("kw","else")&&(this.lexer.next(),e.else=this.parse_expression()),console.log(e),e}parse_lambda(){return{type:"lambda",vars:this.delimited("(",")",",",this.parse_varname.bind(this)),body:this.parse_expression()}}parse_bool(){return{type:"bool",value:"true"==this.lexer.next().value}}parse_toplevel(){for(var t=[];!this.lexer.eof();)t.push(this.parse_expression()),this.lexer.eof()||this.skip_tok("punc",";");return{type:"prog",prog:t}}unexpected(){this.lexer.error("Unexpected token: "+JSON.stringify(this.lexer.peek()))}}class h{constructor(t){this.vars=Object.create(t?t.vars:null),this.parent=t}extend(){return new h(this)}lookup(t){let e=this;for(;e;){if(Object.prototype.hasOwnProperty.call(e.vars,t))return e;e=e.parent}}get(t){if(t in this.vars)return this.vars[t];throw new Error("作用域中无法找到变量: "+t)}set(t,e){let n=this.lookup(t);if(!n&&this.parent)throw new Error("Undefined variable "+t);return(n||this).vars[t]=e}def(t,e){return this.vars[t]=e}}const d=function t(e,n){switch(e.type){case"num":case"str":case"bool":return e.value;case"var":return n.get(e.value);case"prog":let r=!1;return e.prog.forEach(function(e){r=t(e,n)}),r;case"assign":if("var"!=e.left.type)throw new Error("Cannot assign to "+JSON.stringify(e.left));return n.set(e.left.value,t(e.right,n));case"if":return t(e.cond,n)?t(e.then,n):!!e.else&&t(e.else,n);case"lambda":return function(){let r=e.vars,i=e.body,o=n.extend();for(let t=0;t<r.length;t++)o.def(r[t],t<arguments.length&&arguments[t]);return t(i,o)};case"call":return t(e.func,n).apply(null,e.args.map(e=>t(e,n)));case"binary":return function(t,e,n){function r(t){if("number"!=typeof t)throw new Error("Expected number but got "+t);return t}function i(t){if(0==r(t))throw new Error("Divide by zero");return t}switch(t){case"+":return r(e)+r(n);case"-":return r(e)-r(n);case"*":return r(e)*r(n);case"/":return r(e)/i(n);case"%":return r(e)%i(n);case"&&":return!1!==e&&n;case"||":return!1!==e?e:n;case"<":return r(e)<r(n);case">":return r(e)>r(n);case"<=":return r(e)<=r(n);case">=":return r(e)>=r(n);case"==":return e===n;case"!=":return e!==n}throw new Error("Can't apply operator "+t)}(e.operator,t(e.left,n),t(e.right,n));default:throw new Error("I don't know how to evaluate "+e.type)}};var v=class{constructor(){this.root=document.querySelector("#root"),this.template='\n            <div id="ide">\n                <div class="ide_header">\n                    <h1 class="ide_title">Mu IDE</h1>\n                    <div class="ide_button">编译</div>\n                </div>\n                <div class="ide_main">\n                    <div class="ide_editor" contenteditable=true>\n                    </div>\n                    <div class="ide_display"></div>\n                </div>\n                <div class="ide_console_wrapper">\n                    <div class="ide_console_title"> 输出 </div>\n                    <div class="ide_console"></div>\n                </div>\n            </div>\n        ',this.root.insertAdjacentHTML("beforeend",this.template),this.elem=document.querySelector("#ide"),this.editor=this.elem.querySelector(".ide_editor"),this.editor.innerHTML='\n            <div>println("Hello World!");</div><br>\n\n            <div># this is a comment</div><br>\n\n            <div>println(2 + 3 * 4);</div><br>\n\n            <div>fib = lambda (n) if n < 2 then n else fib(n - 1) + fib(n - 2);</div><br>\n\n            <div>fib(15);</div><br>\n        ',this.display=this.elem.querySelector(".ide_display"),this.console=this.elem.querySelector(".ide_console"),this.btn=this.elem.querySelector(".ide_button"),this.input=new p(""),this.lexer=new l(this.input),this.parser=new f(this.lexer),this.bindEvents(),this.initObservers(),this.lexing()}bindEvents(){this.btn.addEventListener("click",()=>{this.console.innerText="",this.compile()}),window.addEventListener("keyup",t=>{this.lexing()}),this.display.addEventListener("mouseover",t=>{let e=t.target;if("span"===e.tagName.toLowerCase()){let t=e.className.match(/code-(\w+)/);if(t){let n=t[1];if("var"===n||"num"===n||"str"===n){let t=e.getBoundingClientRect(),r=e.dataset.value;this.popup(t.x,t.y,"token类型：".concat(n,"\ntoken值：").concat(r))}}else this.hidePopup()}else this.hidePopup()},!0)}popup(t,e,n){if(this.popupDiv)this.popupDiv.querySelector(".popup-content").innerText=n;else{let t='\n        <div class="popup-tip">\n          <div class="popup-title">tips</div>\n          <div class="popup-content">\n            '.concat(n,"\n          </div>\n        </div>\n      ");this.display.insertAdjacentHTML("afterend",t),this.popupDiv=document.getElementsByClassName("popup-tip")[0]}this.popupDiv.style.visibility="visible",this.popupDiv.style.left=t+"px",this.popupDiv.style.top=e+30+"px"}hidePopup(){this.popupDiv&&(this.popupDiv.style.visibility="hidden")}_changeWhiteChars(t){var e="";if(1===t.length&&" "===t)return" ";for(var n=0;n<t.length;n++)"\n"===t[n]?e+="<br>":e+=t[n];return e}initObservers(){this.lastFragmentEnd=0,this.fragments=[],this.keywordHighlightObserver={notify:(t,e,n)=>{if(this.lastFragmentEnd<e){let t=this.getContent().substring(this.lastFragmentEnd,e),n=this._changeWhiteChars(t),r='\n            <span class="code-space">'.concat(n,"</span>\n          ");this.fragments.push(r)}let r=this.getContent().substring(e,n);if("kw"===t.type){let e='\n            <span class="code-'.concat(t.type,'" style="color:red">').concat(r,"</span>\n          ");this.fragments.push(e),this.lastFragmentEnd=n}else if(["var","num","str"].includes(t.type)){let e='\n            <span class="code-'.concat(t.type,'" data-value="').concat(t.value,'">').concat(r,"</span>\n          ");this.fragments.push(e),this.lastFragmentEnd=n}else{let e='\n            <span class="code-'.concat(t.type,'">').concat(r,"</span>\n          ");this.fragments.push(e),this.lastFragmentEnd=n}}},this.lexer.registerObserver(this.keywordHighlightObserver)}getContent(){let t=this.editor.innerText,e=t.length,n=0,r=t.indexOf("\n\n",n);for(;r>=0&&n<e;)n=r+1,r=(t=t.substring(0,r+1)+t.substring(r+2)).indexOf("\n\n",n);return t}render_content(){let t=this.fragments.join("");this.display.innerHTML=t,this.fragments=[]}lexing(){let t=this.getContent();this.input.updateCode(t);this.lexer.lexing();this.render_content()}compile(){const t=this.getContent();this.input.updateCode(t);const e=this.parser.parse_toplevel(),n=new h;n.vars.println=t=>{this.console.innerText+="\n".concat(t)};const r=d(e,n);this.console.innerText+="\n程序运行结果: ".concat(r)}};n(56);window.ide=new v}]);